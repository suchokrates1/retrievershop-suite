{% extends "base.html" %}

{% block content %}
<h2 class="mb-3 text-center">Dodaj nowy przedmiot</h2>
    <form action="{{ url_for('products.add_item') }}" method="post" class="row row-cols-1 row-cols-md-2 g-3 w-100">
        {{ form.csrf_token }}
        <div class="col-md-6">
            <label for="name" class="form-label">Nazwa produktu:</label>
            <input type="text" id="name" name="name" required class="form-control">
        </div>

        <div class="col-md-6">
            <label for="color" class="form-label">Kolor:</label>
            <select id="color" name="color" required class="form-select" onchange="toggleCustomColor()">
                <option value="Czerwony">Czerwony</option>
                <option value="Niebieski">Niebieski</option>
                <option value="Zielony">Zielony</option>
                <option value="Czarny">Czarny</option>
                <option value="Biały">Biały</option>
                <option value="Brązowy">Brązowy</option>
                <option value="Różowy">Różowy</option>
                <option value="Fioletowy">Fioletowy</option>
                <option value="Srebrny">Srebrny</option>
                <option value="Pomarańczowy">Pomarańczowy</option>
                <option value="Turkusowy">Turkusowy</option>
                <option value="Żółty">Żółty</option>
                <option value="Szary">Szary</option>
                <option value="Złoty">Złoty</option>
                <option value="Beżowy">Beżowy</option>
                <option value="Khaki">Khaki</option>
                <option value="Bordowy">Bordowy</option>
                <option value="Granatowy">Granatowy</option>
                <option value="Kremowy">Kremowy</option>
                <option value="Inny">Inny (wpisz poniżej)</option>
            </select>
        </div>

        <div class="col-md-6" id="custom-color-container" style="display: none;">
            <label for="custom_color" class="form-label">Niestandardowy kolor:</label>
            <input type="text" id="custom_color" name="custom_color" class="form-control" placeholder="Wpisz kolor">
        </div>


        {% for size in ALL_SIZES %}
            <div class="col-12">
                <label class="form-label">Rozmiar: {{ size }}</label>
                <div class="row g-2">
                    <div class="col">
                        <input type="number" id="quantity_{{ size }}" name="quantity_{{ size }}" min="0" value="0" class="form-control" placeholder="Ilość">
                    </div>
                    <div class="col">
                        <input type="text" id="barcode_{{ size }}" name="barcode_{{ size }}" class="form-control" placeholder="Kod kreskowy">
                    </div>
                </div>
            </div>
        {% endfor %}

        <div class="col-12 form-actions text-center">
            <button type="submit" class="btn btn-primary">Dodaj przedmiot</button>
        </div>
    </form>

<script>
function toggleCustomColor() {
    const colorSelect = document.getElementById('color');
    const customColorContainer = document.getElementById('custom-color-container');
    const customColorInput = document.getElementById('custom_color');
    
    if (colorSelect.value === 'Inny') {
        customColorContainer.style.display = 'block';
        customColorInput.required = true;
    } else {
        customColorContainer.style.display = 'none';
        customColorInput.required = false;
        customColorInput.value = '';
    }
}

// Call on page load in case form is re-rendered with "Inny" selected
document.addEventListener('DOMContentLoaded', function() {
    toggleCustomColor();
});
</script>


{% endblock %}
